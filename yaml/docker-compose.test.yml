---
services:
  sut:
    build:
      context: .
      dockerfile: Dockerfile
    command: |
      sh -c '
        set -euo pipefail
        # Use $$ to prevent interpolation 
        if [ $$(id -u) -ne 1000 ]; then
          exit 1
        fi
        base64 --version # coreutils
        curl --version # curl
        git --version # git
        jq --version # jq
        json2yaml --version # json2yaml
        pip --version # py3-pip
        pipx --version # pipx
        prettier --version # prettier
        python --version # python3
        v8r --version # v8r
        yaml-paths --version # yamlpath
        yamllint --version # yamllint
        yq --version # yq
      '
